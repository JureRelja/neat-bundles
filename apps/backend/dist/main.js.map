{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from \"@nestjs/core\";\nimport { NestExpressApplication } from \"@nestjs/platform-express\";\nimport { join } from \"path\";\nimport { AppModule } from \"./app.module\";\nimport handlebars from \"hbs\";\n\nasync function bootstrap() {\n    const app = await NestFactory.create<NestExpressApplication>(AppModule);\n\n    app.useStaticAssets(join(__dirname, \"..\", \"client/public\"));\n    app.setBaseViewsDir(join(__dirname, \"..\", \"client/public/views\"));\n    app.setViewEngine(\"hbs\");\n\n    await app.listen(process.env.PORT ?? 3000);\n}\nbootstrap()\n    .then(() => {\n        console.log(\"Server started at port\" + (process.env.PORT ?? 3000));\n    })\n    .catch((err: unknown) => {\n        console.error(\"Error starting server\", err);\n    });\n\n//uncomment this line in production\n// const BASE_URL = process.env.BASE_URL ?? \"http://localhost:3000\";\nconst BASE_URL: string = \"https://context-prisoners-manufacturing-cyprus.trycloudflare.com\";\n\n// Register a Handlebars helper to make URLs absolute\n// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\nhandlebars.registerHelper(\"absoluteUrl\", (path: string) => {\n    if (path.startsWith(\"http\") || path.startsWith(\"//\")) {\n        return path; // Already absolute\n    }\n    return `${BASE_URL}${path.startsWith(\"/\") ? \"\" : \"/\"}${path}`;\n});\n"],"names":["bootstrap","app","NestFactory","create","AppModule","useStaticAssets","join","__dirname","setBaseViewsDir","setViewEngine","listen","process","env","PORT","then","console","log","catch","err","error","BASE_URL","handlebars","registerHelper","path","startsWith"],"mappings":";;;;sBAA4B;sBAEP;2BACK;4DACH;;;;;;AAEvB,eAAeA;IACX,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAAyBC,oBAAS;IAEtEH,IAAII,eAAe,CAACC,IAAAA,UAAI,EAACC,WAAW,MAAM;IAC1CN,IAAIO,eAAe,CAACF,IAAAA,UAAI,EAACC,WAAW,MAAM;IAC1CN,IAAIQ,aAAa,CAAC;IAElB,MAAMR,IAAIS,MAAM,CAACC,QAAQC,GAAG,CAACC,IAAI,IAAI;AACzC;AACAb,YACKc,IAAI,CAAC;IACFC,QAAQC,GAAG,CAAC,2BAA4BL,CAAAA,QAAQC,GAAG,CAACC,IAAI,IAAI,IAAG;AACnE,GACCI,KAAK,CAAC,CAACC;IACJH,QAAQI,KAAK,CAAC,yBAAyBD;AAC3C;AAEJ,mCAAmC;AACnC,oEAAoE;AACpE,MAAME,WAAmB;AAEzB,qDAAqD;AACrD,yGAAyG;AACzGC,YAAU,CAACC,cAAc,CAAC,eAAe,CAACC;IACtC,IAAIA,KAAKC,UAAU,CAAC,WAAWD,KAAKC,UAAU,CAAC,OAAO;QAClD,OAAOD,MAAM,mBAAmB;IACpC;IACA,OAAO,GAAGH,WAAWG,KAAKC,UAAU,CAAC,OAAO,KAAK,MAAMD,MAAM;AACjE"}