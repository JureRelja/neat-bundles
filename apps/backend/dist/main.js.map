{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from \"@nestjs/core\";\nimport { NestExpressApplication } from \"@nestjs/platform-express\";\nimport { join } from \"path\";\nimport { AppModule } from \"./app.module\";\nimport handlebars from \"hbs\";\nimport { config } from \"dotenv\";\nimport { resolve } from \"path\";\n\n// Load .env from backend directory\nconfig({ path: resolve(__dirname, \"../.env\") });\n\nasync function bootstrap() {\n    const app = await NestFactory.create<NestExpressApplication>(AppModule);\n\n    app.useStaticAssets(join(__dirname, \"..\", \"client/public\"));\n    app.setBaseViewsDir(join(__dirname, \"..\", \"client/public/views\"));\n    app.setViewEngine(\"hbs\");\n\n    await app.listen(process.env.PORT ?? 3000);\n}\nbootstrap()\n    .then(() => {\n        console.log(\"Server started at port \" + (process.env.PORT ?? 3000));\n    })\n    .catch((err: unknown) => {\n        console.error(\"Error starting server\", err);\n    });\n\n//uncomment this line in production\n// const BASE_URL = process.env.BASE_URL ?? \"http://localhost:3000\";\nconst BASE_URL: string = process.env.TUNNEL_URL ?? \"http://localhost:3000\";\nconsole.log(\"BASE_URL\", BASE_URL);\n\n// Register a Handlebars helper to make URLs absolute\n// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\nhandlebars.registerHelper(\"absoluteUrl\", (path: string) => {\n    if (path.startsWith(\"http\") || path.startsWith(\"//\")) {\n        return path; // Already absolute\n    }\n    return `${BASE_URL}${path.startsWith(\"/\") ? \"\" : \"/\"}${path}`;\n});\n"],"names":["config","path","resolve","__dirname","bootstrap","app","NestFactory","create","AppModule","useStaticAssets","join","setBaseViewsDir","setViewEngine","listen","process","env","PORT","then","console","log","catch","err","error","BASE_URL","TUNNEL_URL","handlebars","registerHelper","startsWith"],"mappings":";;;;sBAA4B;sBAEP;2BACK;4DACH;wBACA;;;;;;AAGvB,mCAAmC;AACnCA,IAAAA,cAAM,EAAC;IAAEC,MAAMC,IAAAA,aAAO,EAACC,WAAW;AAAW;AAE7C,eAAeC;IACX,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAAyBC,oBAAS;IAEtEH,IAAII,eAAe,CAACC,IAAAA,UAAI,EAACP,WAAW,MAAM;IAC1CE,IAAIM,eAAe,CAACD,IAAAA,UAAI,EAACP,WAAW,MAAM;IAC1CE,IAAIO,aAAa,CAAC;IAElB,MAAMP,IAAIQ,MAAM,CAACC,QAAQC,GAAG,CAACC,IAAI,IAAI;AACzC;AACAZ,YACKa,IAAI,CAAC;IACFC,QAAQC,GAAG,CAAC,4BAA6BL,CAAAA,QAAQC,GAAG,CAACC,IAAI,IAAI,IAAG;AACpE,GACCI,KAAK,CAAC,CAACC;IACJH,QAAQI,KAAK,CAAC,yBAAyBD;AAC3C;AAEJ,mCAAmC;AACnC,oEAAoE;AACpE,MAAME,WAAmBT,QAAQC,GAAG,CAACS,UAAU,IAAI;AACnDN,QAAQC,GAAG,CAAC,YAAYI;AAExB,qDAAqD;AACrD,yGAAyG;AACzGE,YAAU,CAACC,cAAc,CAAC,eAAe,CAACzB;IACtC,IAAIA,KAAK0B,UAAU,CAAC,WAAW1B,KAAK0B,UAAU,CAAC,OAAO;QAClD,OAAO1B,MAAM,mBAAmB;IACpC;IACA,OAAO,GAAGsB,WAAWtB,KAAK0B,UAAU,CAAC,OAAO,KAAK,MAAM1B,MAAM;AACjE"}