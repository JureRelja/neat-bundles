import{r as o,j as t}from"./jsx-runtime-BMrMXMSG.js";import{I as v}from"./resourcePicer-CAWIdYIt.js";import{a as u,G as C,H as w}from"./constants-xrzLx32Y.js";import{I as y}from"./wideButton-D6W8M1Od.js";import{u as M}from"./index-y3bcNOgC.js";import{a as _}from"./index-dL4ND7l9.js";import{a as D}from"./components-BDrsBlv3.js";import{B as a,T as i}from"./BlockStack-CBC_PXe6.js";import{T as p,I as B}from"./TextField-B-Nm0VLF.js";import{I as N}from"./InlineGrid-Df5BtU4c.js";import{B as m}from"./Box-CnqJGKrn.js";import"./index-BdEiwQAR.js";import"./use-toggle-Bx-o2WPs.js";import"./context-C-JwoyEZ.js";import"./Icon-C-cZWGQM.js";import"./use-is-after-initial-mount-DPsAqfZs.js";import"./use-event-listener-DOg0fKDs.js";import"./EventListener-kZJ1rsuP.js";const A="_tableWrapper_1tdlw_1",E="_loadingTable_1tdlw_5",G="_hide_1tdlw_18",O={tableWrapper:A,loadingTable:E,hide:G};function et(){const h=M(),x=_(),c=D(),g=()=>{if(r.length===0||r.length<e){d(!0);return}if(e<1||n<e){d(!0);return}if(!l){d(!0);return}const s=new FormData,I={title:l,description:"",stepNumber:1,stepType:"PRODUCT",productInput:{allowProductDuplicates:!1,showProductPrice:!0,minProductsOnStep:e,maxProductsOnStep:n,products:r}};s.append("stepData",JSON.stringify(I)),s.append("action","addProductStep"),h(s,{method:"POST",action:`/app/edit-bundle-builder/${x.bundleid}/steps?stepNumber=2&onboarding=true&multiStep=${c.data.multiStep}`,navigate:!0})},[f,d]=o.useState(!1),[l,b]=o.useState(),[r,S]=o.useState([]),[e,P]=o.useState(1),[n,j]=o.useState(3),T=s=>{d(!0),S(s)};return t.jsx("div",{className:O.fadeIn,children:t.jsxs(a,{gap:"1000",inlineAlign:"center",children:[t.jsxs(a,{gap:u,children:[c.data.multiStep?t.jsx(i,{as:"p",variant:"headingLg",alignment:"center",children:"Enter the title for the first step"}):t.jsx(i,{as:"p",variant:"headingLg",alignment:"center",children:"Enter the title for this step"}),t.jsx(p,{label:"Step title",labelHidden:!0,error:l===""?"Step title is required":"",type:"text",name:"stepTitle",value:l,helpText:"Customers will see this title when they build a bundle.",onChange:s=>{b(s)},autoComplete:"off"})]}),t.jsxs(a,{gap:"600",inlineAlign:"center",children:[t.jsxs(a,{gap:C,children:[t.jsx(i,{as:"p",variant:"headingLg",alignment:"center",children:"Select the products you want to display on this step"}),t.jsx(i,{as:"p",variant:"bodyMd",tone:"subdued",alignment:"center",children:"This is a product step, where customers can choose products to add to their bundle."})]}),t.jsxs(a,{gap:u,children:[t.jsx(v,{onBoarding:!0,stepId:void 0,selectedProducts:r,updateSelectedProducts:T}),t.jsx(B,{message:(r.length===0||r.length<e)&&f?`Please select at least ${e} products.`:"",fieldID:"products"}),t.jsxs(a,{gap:u,children:[t.jsx(i,{as:"h2",variant:"headingMd",children:"Product rules"}),t.jsxs(N,{columns:2,gap:w,children:[t.jsx(m,{id:"minProducts",children:t.jsx(p,{label:"Minimum products to select",type:"number",helpText:"Customers must select at least this number of products on this step.",autoComplete:"off",inputMode:"numeric",name:"minProducts",min:1,max:n,value:e.toString(),onChange:s=>{P(Number(s))},error:e<1?"Min products must be greater than 0":""})}),t.jsx(m,{id:"maxProducts",children:t.jsx(p,{label:"Maximum products to select",helpText:"Customers can select up to this number of products on this step.",type:"number",autoComplete:"off",inputMode:"numeric",name:"maxProducts",min:e>0?e:1,value:n.toString(),onChange:s=>{j(Number(s))},error:n<e?"Max products must be greater than or equal to min products":""})})]})]})]})]}),t.jsx(y,{onClick:g})]})})}export{et as default};
