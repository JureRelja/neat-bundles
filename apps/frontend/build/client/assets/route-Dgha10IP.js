import{r as a,j as e}from"./jsx-runtime-BMrMXMSG.js";import{I}from"./resourcePicer-CAWIdYIt.js";import{a as u,G as v,H as C}from"./constants-xrzLx32Y.js";import{I as w}from"./wideButton-D6W8M1Od.js";import{a as y}from"./index-dL4ND7l9.js";import{u as M}from"./index-y3bcNOgC.js";import{B as n,T as l}from"./BlockStack-CBC_PXe6.js";import{T as p,I as _}from"./TextField-B-Nm0VLF.js";import{I as B}from"./InlineGrid-Df5BtU4c.js";import{B as c}from"./Box-CnqJGKrn.js";import"./index-BdEiwQAR.js";import"./use-toggle-Bx-o2WPs.js";import"./context-C-JwoyEZ.js";import"./Icon-C-cZWGQM.js";import"./use-is-after-initial-mount-DPsAqfZs.js";import"./use-event-listener-DOg0fKDs.js";import"./EventListener-kZJ1rsuP.js";const N="_tableWrapper_1tdlw_1",D="_loadingTable_1tdlw_5",A="_hide_1tdlw_18",G={tableWrapper:N,loadingTable:D,hide:A};function Y(){const m=y(),h=M(),x=()=>{if(r.length===0||r.length<t){i(!0);return}if(t<1||o<t){i(!0);return}if(!d){i(!0);return}const s=new FormData,T={title:d,description:"",stepType:"PRODUCT",stepNumber:2,productInput:{minProductsOnStep:t,maxProductsOnStep:o,products:r,allowProductDuplicates:!1,showProductPrice:!0}};s.append("stepData",JSON.stringify(T)),s.append("action","addProductStep"),h(s,{method:"POST",action:`/app/edit-bundle-builder/${m.bundleid}/steps?stepNumber=4&onboarding=true`,navigate:!0})},[g,i]=a.useState(!1),[d,b]=a.useState(),[r,f]=a.useState([]),[t,P]=a.useState(1),[o,S]=a.useState(3),j=s=>{i(!0),f(s)};return e.jsx("div",{className:G.fadeIn,children:e.jsxs(n,{gap:"1000",inlineAlign:"center",children:[e.jsxs(n,{gap:u,children:[e.jsx(l,{as:"p",variant:"headingLg",alignment:"center",children:"Enter the title for the second step"}),e.jsx(p,{label:"Step title",labelHidden:!0,error:d===""?"Step title is required":"",type:"text",name:"stepTitle",value:d,helpText:"Customers will see this title when they build a bundle.",onChange:s=>{b(s)},autoComplete:"off"})]}),e.jsxs(n,{gap:"600",inlineAlign:"center",children:[e.jsxs(n,{gap:v,children:[e.jsx(l,{as:"p",variant:"headingLg",alignment:"center",children:"Select the products you want to display on this step"}),e.jsx(l,{as:"p",variant:"bodyMd",tone:"subdued",alignment:"center",children:"This is a product step, where customers can choose products to add to their bundle."})]}),e.jsxs(n,{gap:u,children:[e.jsx(I,{onBoarding:!0,stepId:void 0,selectedProducts:r,updateSelectedProducts:j}),e.jsx(_,{message:(r.length===0||r.length<t)&&g?`Please select at least ${t} products.`:"",fieldID:"products"}),e.jsxs(n,{gap:u,children:[e.jsx(l,{as:"h2",variant:"headingMd",children:"Product rules"}),e.jsxs(B,{columns:2,gap:C,children:[e.jsx(c,{id:"minProducts",children:e.jsx(p,{label:"Minimum products to select",type:"number",helpText:"Customers must select at least this number of products on this step.",autoComplete:"off",inputMode:"numeric",name:"minProducts",min:1,max:o,value:t.toString(),onChange:s=>{P(Number(s))},error:t<1?"Min products must be greater than 0":""})}),e.jsx(c,{id:"maxProducts",children:e.jsx(p,{label:"Maximum products to select",helpText:"Customers can select up to this number of products on this step.",type:"number",autoComplete:"off",inputMode:"numeric",name:"maxProducts",min:t>0?t:1,value:o.toString(),onChange:s=>{S(Number(s))},error:o<t?"Max products must be greater than or equal to min products":""})})]})]})]})]}),e.jsx(w,{onClick:x})]})})}export{Y as default};
