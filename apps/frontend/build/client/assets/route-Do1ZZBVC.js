import{R as x,j as e,r as N}from"./jsx-runtime-BMrMXMSG.js";import{R,h as P}from"./index-BdEiwQAR.js";import{a as v,B as W,L as Z,G as $,b as B}from"./constants-xrzLx32Y.js";import{T as i,B as a}from"./BlockStack-CBC_PXe6.js";import{B as p}from"./use-toggle-Bx-o2WPs.js";import{u as H,b as J}from"./index-dL4ND7l9.js";import{u as V,F as K}from"./index-y3bcNOgC.js";import{a as q,L as C}from"./components-BDrsBlv3.js";import{S as z}from"./SkeletonPage-oS14FYNy.js";import{C as n}from"./Card-DdP2um4p.js";import{S as c}from"./SkeletonBodyText-PJLcqbGt.js";import{P as U}from"./Page-C2Lx7T4Z.js";import{B as Y}from"./Banner-DrpU63xa.js";import{B as y}from"./Box-CnqJGKrn.js";import{I as _}from"./InlineGrid-Df5BtU4c.js";import{D}from"./Divider-BzciHtgk.js";import{I as d}from"./InlineStack-BYbsxF_T.js";import{T as I}from"./Pagination-B_BjUQTQ.js";import{F as Q}from"./FooterHelp-BUGPZSpp.js";import"./context-C-JwoyEZ.js";import"./Icon-C-cZWGQM.js";import"./use-is-after-initial-mount-DPsAqfZs.js";import"./within-content-context-B9v2rWOt.js";import"./ButtonGroup-GOmEL2FH.js";import"./Bleed-DpULRbVU.js";import"./TextField-B-Nm0VLF.js";import"./use-event-listener-DOg0fKDs.js";import"./EventListener-kZJ1rsuP.js";import"./context-g-r66Qxo.js";import"./Badge-PSuHbHll.js";import"./context-B2IVp4WU.js";var E=function(s){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),x.createElement("path",{fillRule:"evenodd",d:"M3.5 6.25a2.75 2.75 0 0 1 2.75-2.75h7.5a2.75 2.75 0 0 1 2.75 2.75v4.5a2.75 2.75 0 0 1-2.75 2.75h-1.25v1.5h.75a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1 0-1.5h.75v-1.5h-1.25a2.75 2.75 0 0 1-2.75-2.75v-4.5Zm5.5 7.25h2v1.5h-2v-1.5Zm-2.75-8.5c-.69 0-1.25.56-1.25 1.25v3.25h10v-3.25c0-.69-.56-1.25-1.25-1.25h-7.5Zm8.725 6c-.116.57-.62 1-1.225 1h-7.5a1.25 1.25 0 0 1-1.225-1h9.95Z"}))};E.displayName="DesktopIcon";var A=function(s){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),x.createElement("path",{d:"M7.75 13.75a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75Z"}),x.createElement("path",{fillRule:"evenodd",d:"M4.75 5.75a2.75 2.75 0 0 1 2.75-2.75h5a2.75 2.75 0 0 1 2.75 2.75v8.5a2.75 2.75 0 0 1-2.75 2.75h-5a2.75 2.75 0 0 1-2.75-2.75v-8.5Zm2.75-1.25c-.69 0-1.25.56-1.25 1.25v8.5c0 .69.56 1.25 1.25 1.25h5c.69 0 1.25-.56 1.25-1.25v-8.5c0-.69-.56-1.25-1.25-1.25h-.531a1 1 0 0 1-.969.75h-2a1 1 0 0 1-.969-.75h-.531Z"}))};A.displayName="MobileIcon";const X="/assets/navStickyMobile-pwuzWHr9.png",ee="/assets/navNormalMobile-Cg-oHKqj.png",te="/assets/navNormalDesktop-CVZqIvWA.png",ae="/assets/navStickyDesktop-yJA4uUmx.png",ie="_divWithFlexCenterContent_xey5s_1",se="_sticky_xey5s_11",ne="_overflow_xey5s_18",oe="_editorTab_xey5s_22",re="_activeEditorTab_xey5s_34",le="_image_xey5s_39",ce="_active_xey5s_34",k={divWithFlexCenterContent:ie,sticky:se,overflow:ne,editorTab:oe,activeEditorTab:re,image:le,active:ce};function f({value:t,selectedValue:s,imgSrc:r,updateHandler:u,label:S,attributeKey:b,horizontal:T}){return e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"radio",id:"sticky",name:"displayMobileStepNavigation",defaultValue:t,hidden:!0}),e.jsx("label",{htmlFor:"displayMobileStepNavigation","aria-label":"sticky",children:e.jsxs("div",{className:k.divWithFlexCenterContent,children:[e.jsx(i,{as:"p",fontWeight:"bold",variant:"headingMd",children:S}),e.jsx("img",{src:r,alt:"Sticky navigation",width:T?370:220,onClick:()=>{u(b,t)},className:`${k.image} ${s===t?k.active:""}`}),e.jsx(p,{variant:"primary",disabled:s===t,onClick:()=>{u(b,t)},children:s!==t?"Select":"Selected"})]})})]})}function We(){const t=H(),s=J(),r=R(),u=t.state==="loading",S=t.state==="submitting",b=V(),h=q().data,m=h.globalSettings,F={...m,stepNavigationTypeDesktop:m.stepNavigationTypeDesktop,stepNavigationTypeMobile:m.stepNavigationTypeMobile},[o,G]=N.useState(F),[g,w]=N.useState("desktop"),L=async()=>{await r.saveBar.hide("my-save-bar");const l=new FormData;l.append("action","updateSettings"),l.append("globalSettings",JSON.stringify(o)),b(l,{method:"POST",navigate:!0})},j=(l,M)=>{console.log(l,M),G(O=>({...O,[l]:M}))};return N.useEffect(()=>{JSON.stringify(o)!==JSON.stringify(m)&&r.saveBar.show("my-save-bar")},[o,m]),e.jsx(e.Fragment,{children:u||S?e.jsx(z,{primaryAction:!0,children:e.jsxs(a,{gap:"500",children:[e.jsx(n,{children:e.jsx(c,{})}),e.jsx(n,{children:e.jsx(c,{})}),e.jsx(n,{children:e.jsx(c,{})}),e.jsx(n,{children:e.jsx(c,{})}),e.jsx(n,{children:e.jsx(c,{})}),e.jsx(n,{children:e.jsx(c,{})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(P,{id:"my-save-bar",children:[e.jsx("button",{variant:"primary",onClick:L}),e.jsx("button",{onClick:()=>r.saveBar.hide("my-save-bar")})]}),e.jsx(U,{fullWidth:!0,backAction:{content:"back",onAction:async()=>{await r.saveBar.leaveConfirmation(),s(-1)}},title:"Global settings",subtitle:"Edit the behavior of all bundles",children:e.jsxs(K,{method:"POST","data-discard-confirmation":!0,"data-save-bar":!0,children:[e.jsx("input",{type:"hidden",name:"action",defaultValue:"updateSettings"}),e.jsx("input",{type:"hidden",name:"globalSettings",defaultValue:JSON.stringify(o)}),h.bundleBuilderHandle?e.jsxs(a,{gap:W,children:[e.jsxs(a,{gap:Z,children:[e.jsxs(_,{columns:{xs:"1fr",md:"3fr 4fr"},gap:"400",children:[e.jsx(y,{as:"section",children:e.jsxs(a,{gap:"400",children:[e.jsx(i,{as:"h3",variant:"headingLg",children:"Colors"}),e.jsx(i,{as:"p",children:"Edit colors to match your brand."})]})}),e.jsx(n,{children:e.jsxs(a,{gap:v,children:[e.jsx(i,{as:"p",children:"All styling changes are done using Shopify's native theme editor."}),e.jsx(i,{as:"p",children:"Just click 'Edit styles'. The editing process is the same as if you were editing your theme."}),e.jsx(p,{variant:"primary",target:"_blank",url:`https://${h.user.storeUrl}/admin/themes/current/editor?context=apps&previewPath=/pages/${h.bundleBuilderHandle}?neatBundlePreview=true&appEmbed=${h.appId}/embed_block`,children:"Edit colors"})]})})]}),e.jsx(D,{}),e.jsx(d,{align:"center",children:e.jsx(i,{as:"h3",variant:"headingLg",children:e.jsx(d,{children:"The settings below apply separately for desktop and mobile."})})}),e.jsx("div",{className:k.sticky,children:e.jsx(n,{padding:"200",children:e.jsxs(d,{gap:$,align:"space-between",blockAlign:"center",children:[e.jsxs(i,{as:"h3",variant:"headingMd",children:["You are currently editing settings for: ",e.jsx("u",{children:g==="desktop"?"Desktop":"Mobile"})]}),e.jsxs(d,{gap:v,children:[e.jsx(I,{content:"Desktop",children:e.jsx(p,{variant:"secondary",icon:E,disabled:g==="desktop",onClick:()=>{w("desktop")}})}),e.jsx(I,{content:"Mobile",children:e.jsx(p,{variant:"secondary",icon:A,disabled:g==="mobile",onClick:()=>{w("mobile")}})})]})]})})}),e.jsx(D,{}),e.jsxs(_,{columns:{xs:"1fr",md:`${g==="desktop"?"2fr 5fr":"3fr 4fr"}`},gap:"400",children:[e.jsx(y,{as:"section",children:e.jsxs(a,{gap:"400",children:[e.jsx(i,{as:"h3",variant:"headingLg",children:"Step navigation"}),e.jsx(i,{as:"p",variant:"bodyMd",children:"Navigation can be sticky or normal. Sticky navigation will be always visible on the screen, while normal navigation is only visible when the user scrolls down."})]})}),e.jsx(n,{children:g==="desktop"?e.jsx(a,{gap:B,children:e.jsxs(d,{gap:v,align:"center",blockAlign:"center",children:[e.jsx(f,{label:"Normal navigation",imgSrc:te,attributeKey:"stepNavigationTypeDesktop",selectedValue:o.stepNavigationTypeDesktop,value:"NORMAL",updateHandler:j,horizontal:!0}),e.jsx(f,{imgSrc:ae,label:"Sticky navigation",attributeKey:"stepNavigationTypeDesktop",selectedValue:o.stepNavigationTypeDesktop,value:"STICKY",updateHandler:j,horizontal:!0})]})}):e.jsx(a,{gap:B,children:e.jsxs(d,{gap:v,align:"center",blockAlign:"center",children:[e.jsx(f,{label:"Normal navigation",imgSrc:ee,attributeKey:"stepNavigationTypeMobile",selectedValue:o.stepNavigationTypeMobile,value:"NORMAL",updateHandler:j}),e.jsx(f,{imgSrc:X,label:"Sticky navigation",attributeKey:"stepNavigationTypeMobile",selectedValue:o.stepNavigationTypeMobile,value:"STICKY",updateHandler:j})]})})})]})]}),e.jsxs(y,{width:"full",children:[e.jsx(a,{inlineAlign:"end",children:e.jsx(p,{variant:"primary",submit:!0,children:"Save"})}),e.jsxs(Q,{children:["Are you stuck? ",e.jsx(C,{to:"/app/help",children:"Get help"})," from us, or ",e.jsx(C,{to:"/app/feature-request",children:"suggest new features"}),"."]})]})]}):e.jsx(Y,{title:"Uups, there are no bundles created.",tone:"warning",onDismiss:()=>{},children:e.jsxs(a,{gap:v,children:[e.jsx(i,{as:"p",variant:"headingMd",children:"Please create your first bundle, and then come back here to edit settings."}),e.jsx(y,{children:e.jsx(p,{variant:"secondary",url:"/app",children:"Create bundle"})})]})})]})})]})})}export{We as default};
