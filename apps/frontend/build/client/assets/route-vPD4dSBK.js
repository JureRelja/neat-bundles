import{r as a,j as t}from"./jsx-runtime-BMrMXMSG.js";import{I}from"./resourcePicer-COby-1H6.js";import{a as c,G as v,H as C}from"./constants-PTFKni65.js";import{I as y}from"./wideButton-DColMLDC.js";import{a as M}from"./index-X6hTWa2L.js";import{u as w}from"./index-qcftwevc.js";import{B as n,T as d}from"./BlockStack-CwgU8ZDe.js";import{T as p,I as B}from"./TextField-BeUUpecL.js";import{I as N}from"./InlineGrid-CSxQjylE.js";import{B as l}from"./Box-rytM3cuw.js";import"./index-NTrdOwuS.js";import"./use-toggle-Eq3DVTD9.js";import"./context-DYc23ASG.js";import"./Icon-C8tnHXot.js";import"./use-is-after-initial-mount-2owk6l5Z.js";import"./use-event-listener-CxlhjZIg.js";import"./EventListener-kZJ1rsuP.js";const D={};function W(){const m=M(),h=w(),x=()=>{if(r.length===0||r.length<e){i(!0);return}if(e<1||o<e){i(!0);return}if(!u){i(!0);return}const s=new FormData,T={title:u,description:"",stepType:"PRODUCT",stepNumber:2,productInput:{minProductsOnStep:e,maxProductsOnStep:o,products:r,allowProductDuplicates:!1,showProductPrice:!0}};s.append("stepData",JSON.stringify(T)),s.append("action","addProductStep"),h(s,{method:"POST",action:`/app/edit-bundle-builder/${m.bundleid}/steps?stepNumber=4&onboarding=true`,navigate:!0})},[g,i]=a.useState(!1),[u,f]=a.useState(),[r,b]=a.useState([]),[e,P]=a.useState(1),[o,S]=a.useState(3),j=s=>{i(!0),b(s)};return t.jsx("div",{className:D.fadeIn,children:t.jsxs(n,{gap:"1000",inlineAlign:"center",children:[t.jsxs(n,{gap:c,children:[t.jsx(d,{as:"p",variant:"headingLg",alignment:"center",children:"Enter the title for the second step"}),t.jsx(p,{label:"Step title",labelHidden:!0,error:u===""?"Step title is required":"",type:"text",name:"stepTitle",value:u,helpText:"Customers will see this title when they build a bundle.",onChange:s=>{f(s)},autoComplete:"off"})]}),t.jsxs(n,{gap:"600",inlineAlign:"center",children:[t.jsxs(n,{gap:v,children:[t.jsx(d,{as:"p",variant:"headingLg",alignment:"center",children:"Select the products you want to display on this step"}),t.jsx(d,{as:"p",variant:"bodyMd",tone:"subdued",alignment:"center",children:"This is a product step, where customers can choose products to add to their bundle."})]}),t.jsxs(n,{gap:c,children:[t.jsx(I,{onBoarding:!0,stepId:void 0,selectedProducts:r,updateSelectedProducts:j}),t.jsx(B,{message:(r.length===0||r.length<e)&&g?`Please select at least ${e} products.`:"",fieldID:"products"}),t.jsxs(n,{gap:c,children:[t.jsx(d,{as:"h2",variant:"headingMd",children:"Product rules"}),t.jsxs(N,{columns:2,gap:C,children:[t.jsx(l,{id:"minProducts",children:t.jsx(p,{label:"Minimum products to select",type:"number",helpText:"Customers must select at least this number of products on this step.",autoComplete:"off",inputMode:"numeric",name:"minProducts",min:1,max:o,value:e.toString(),onChange:s=>{P(Number(s))},error:e<1?"Min products must be greater than 0":""})}),t.jsx(l,{id:"maxProducts",children:t.jsx(p,{label:"Maximum products to select",helpText:"Customers can select up to this number of products on this step.",type:"number",autoComplete:"off",inputMode:"numeric",name:"maxProducts",min:e>0?e:1,value:o.toString(),onChange:s=>{S(Number(s))},error:o<e?"Max products must be greater than or equal to min products":""})})]})]})]})]}),t.jsx(y,{onClick:x})]})})}export{W as default};
