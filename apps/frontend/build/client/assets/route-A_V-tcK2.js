import{R as w,j as e,r as v}from"./jsx-runtime-BMrMXMSG.js";import{a as R,G as D,L as H,b as _,d as a}from"./constants-PTFKni65.js";import{p as C,_ as S}from"./index-NTrdOwuS.js";import{C as o}from"./Card-ZEVPeMCa.js";import{B as p,T as r}from"./BlockStack-CwgU8ZDe.js";import{D as Y}from"./Divider-BzciHtgk.js";import{I as b}from"./InlineStack-BZy780dy.js";import{B as x}from"./Box-rytM3cuw.js";import{I as M}from"./Icon-C8tnHXot.js";import{B as P,a as W}from"./use-toggle-Eq3DVTD9.js";import{u as $,b as G}from"./index-X6hTWa2L.js";import{b as z,a as q}from"./components-HnT9RUCx.js";import{S as Z}from"./SkeletonPage-De1vAtof.js";import{S as d}from"./SkeletonBodyText-PJLcqbGt.js";import{P as J}from"./Page-DZ5GBioq.js";import{B as K}from"./Banner-ByLDynuR.js";import"./index-qcftwevc.js";import"./context-DYc23ASG.js";import"./within-content-context-B9v2rWOt.js";import"./use-is-after-initial-mount-2owk6l5Z.js";import"./ButtonGroup-CD4h0o06.js";import"./Bleed-CojZzunP.js";import"./TextField-BeUUpecL.js";import"./use-event-listener-CxlhjZIg.js";import"./EventListener-kZJ1rsuP.js";import"./Pagination-Dn9qu2P0.js";import"./context-BqWvd0oi.js";import"./Badge-SnCWnBbz.js";import"./context-B2IVp4WU.js";var T=function(i){return w.createElement("svg",Object.assign({viewBox:"0 0 20 20"},i),w.createElement("path",{fillRule:"evenodd",d:"M14.03 7.22a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-2.25-2.25a.75.75 0 1 1 1.06-1.06l1.72 1.72 3.97-3.97a.75.75 0 0 1 1.06 0Z"}))};T.displayName="CheckSmallIcon";function Q({label:t,labelHidden:i=!0,onChange:l}){return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"toggle-switch",children:[e.jsx("input",{type:"checkbox",className:"checkbox",name:t,id:t,onChange:l}),e.jsxs("label",{className:"label",htmlFor:t,children:[e.jsx("span",{className:"inner"}),e.jsx("span",{className:"switch"})]})]})})}const U="_tableWrapper_17045_1",V="_loadingTable_17045_5",X="_hide_17045_18",E={tableWrapper:U,loadingTable:V,hide:X};var c=(t=>(t.NONE="NONE",t.FREE="FREE",t.BASIC="BASIC",t.PRO="PRO",t))(c||{});const ee="_pricingPlanWrapper_bx485_1",ne={pricingPlanWrapper:ee};function B({subscriptionIdentifier:t,title:i,features:l,monthlyPricing:f,yearlyPricing:h,pricingInterval:m,activePlan:n,planDisabled:u,trialDays:y,handleSubscription:I}){return e.jsx(o,{children:e.jsxs("div",{className:ne.pricingPlanWrapper,children:[e.jsxs(p,{gap:R,children:[e.jsx(r,{as:"h2",variant:"headingLg",alignment:"center",children:m==="MONTHLY"?i.monthly:i.yearly}),e.jsx(Y,{}),e.jsx(p,{gap:"100",align:"start",children:l.map(g=>e.jsxs(b,{align:"start",children:[e.jsx(x,{children:e.jsx(M,{source:T})}),e.jsx(x,{children:e.jsx(r,{as:"p",children:g})})]},g))})]}),e.jsxs(p,{gap:R,children:[e.jsxs(p,{gap:D,align:"center",children:[e.jsx(r,{as:"h2",variant:"headingLg",alignment:"center",children:m==="MONTHLY"?f:h}),y&&e.jsxs(r,{as:"h2",variant:"headingMd",alignment:"center",children:["+ ",y,"-day free trial"]})]}),e.jsx(P,{variant:"primary",disabled:n||u,onClick:()=>{I(m==="MONTHLY"?t.monthly:t.yearly)},children:n===!0?"Current plan":"Select plan"})]})]})})}function Le(){const i=$().state!=="idle",l=z(),f=G(),h=q(),m=h.user,n={planId:h.planId,planName:h.planName},[u,y]=v.useState("MONTHLY"),I=()=>{y(s=>s==="MONTHLY"?"YEARLY":"MONTHLY")},g=async()=>{const s=new FormData;s.append("action","CANCEL"),l.submit(s,{method:"POST"})},[k,j]=v.useState(),[A,F]=v.useState(),N=s=>{if(n.planId===a.FREE){shopify.modal.show("partner-stores-modal");return}if((s.planId===a.BASIC_MONTHLY||s.planId===a.BASIC_YEARLY)&&(n.planId===a.PRO_MONTHLY||n.planId===a.PRO_YEARLY)){F(s),j(!0);return}L(s)},L=s=>{const O=new FormData;O.append("action",s.planId),l.submit(O,{method:"POST"})};return e.jsx(e.Fragment,{children:i?e.jsx(Z,{primaryAction:!0,children:e.jsxs(p,{gap:"500",children:[e.jsx(o,{children:e.jsx(d,{})}),e.jsx(o,{children:e.jsx(d,{})}),e.jsx(o,{children:e.jsx(d,{})}),e.jsx(o,{children:e.jsx(d,{})}),e.jsx(o,{children:e.jsx(d,{})}),e.jsx(o,{children:e.jsx(d,{})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{id:"partner-stores-modal",children:[e.jsx(x,{padding:"300",children:e.jsx(r,{as:"p",children:"Since your are running a development store, you already have all the features for free."})}),e.jsx(S,{title:"Why pay when it's free!",children:e.jsx("button",{variant:"primary",onClick:()=>shopify.modal.hide("partner-stores-modal"),children:"Close"})})]}),e.jsxs(C,{id:"cancel-subscription-modal",children:[e.jsx(x,{padding:"300",children:e.jsx(r,{as:"p",children:"If you cancel the subscription, you won't be able to use NeatBundles app. Are you sure that you want to to that?"})}),e.jsxs(S,{title:"Cancel confirmation",children:[e.jsx("button",{onClick:()=>shopify.modal.hide("cancel-subscription-modal"),children:"Close"}),e.jsx("button",{variant:"primary",tone:"critical",onClick:()=>{g(),shopify.modal.hide("cancel-subscription-modal")},children:"Cancel"})]})]}),e.jsxs(C,{id:"downgrading-subscription-modal",open:k,onHide:()=>j(!1),children:[e.jsx(x,{padding:"300",children:e.jsxs(r,{as:"p",children:["You are about to downgrade from the ",e.jsx("b",{children:n.planId})," plan to the ",e.jsx("b",{children:A?.planId})," plan. All the bundles that don't fit within the limitations of the new plan will be deleted. Are you sure that you want to do that?"]})}),e.jsxs(S,{title:"Are you sure you want to downgrade your plan?",children:[e.jsx("button",{onClick:()=>j(!1),children:"Close"}),e.jsx("button",{variant:"primary",tone:"critical",onClick:()=>{L(A),j(!1)},children:"Downgrade"})]})]}),e.jsx(J,{title:"Billing",backAction:{content:"Back",onAction:async()=>{f(-1)}},children:e.jsxs("div",{id:E.tableWrapper,children:[e.jsx("div",{className:l.state!=="idle"?E.loadingTable:E.hide,children:e.jsx(W,{accessibilityLabel:"Spinner example",size:"large"})}),e.jsxs(p,{align:"center",gap:H,children:[e.jsx(K,{onDismiss:()=>{},children:e.jsxs(r,{as:"p",children:["Select the plan that best suits your needs. ",e.jsx("b",{children:"For a limited time, we have a 30-day free trial"})," that should be enough to get your customers started with custom bundles."]})}),e.jsxs(b,{gap:R,align:"center",blockAlign:"center",children:[e.jsx(r,{as:"h2",variant:"headingLg",children:"Monthly"}),e.jsx(Q,{label:"Biling frequency",labelHidden:!0,onChange:()=>I()}),e.jsx(r,{as:"h2",variant:"headingLg",children:"Yearly (15% off)"})]}),e.jsxs(b,{gap:_,align:"center",children:[e.jsx(B,{activePlan:n.planId===a.FREE,subscriptionIdentifier:{yearly:{planName:c.FREE,planId:a.FREE},monthly:{planName:c.FREE,planId:a.FREE}},handleSubscription:N,title:{yearly:"Development",monthly:"Development"},monthlyPricing:"Free",yearlyPricing:"Free",pricingInterval:u,planDisabled:!m.isDevelopmentStore,features:["All features","For development stores only"]}),e.jsx(B,{activePlan:n.planId===a.BASIC_MONTHLY||n.planId===a.BASIC_YEARLY,subscriptionIdentifier:{yearly:{planName:c.BASIC,planId:a.BASIC_YEARLY},monthly:{planName:c.BASIC,planId:a.BASIC_MONTHLY}},handleSubscription:N,title:{yearly:"Basic (yearly)",monthly:"Basic (monthly)"},trialDays:30,monthlyPricing:"$6.99",yearlyPricing:"$69.99",pricingInterval:u,features:["Create up to 2 bundles","Create up to 2 two steps in one bundle","Create product steps","Customize colors","Customer support"]}),e.jsx(B,{activePlan:n.planId===a.PRO_MONTHLY||n.planId===a.PRO_YEARLY,subscriptionIdentifier:{yearly:{planName:c.PRO,planId:a.PRO_YEARLY},monthly:{planName:c.PRO,planId:a.PRO_MONTHLY}},handleSubscription:N,trialDays:30,title:{yearly:"Pro (yearly)",monthly:"Pro (monthly)"},monthlyPricing:"$9.99",yearlyPricing:"$99.99",pricingInterval:u,features:["Create unlimited bundles","Create up to 5 steps on all bundles","Create product steps","Collect images or text on steps","Customize colors","Priority support"]})]}),e.jsxs(b,{gap:_,align:"center",blockAlign:"center",children:[e.jsx(r,{as:"p",children:e.jsx("u",{children:n.planId==="NONE"?"You don't have an active plan.":`Your currently active plan is ${n.planId}.`})}),n.planId!=="FREE"&&n.planName!=="NONE"&&e.jsx(P,{onClick:()=>shopify.modal.show("cancel-subscription-modal"),children:"Cancel plan"})]}),e.jsx(Y,{}),e.jsx(r,{as:"p",children:"Note: The plans displayed reflect current pricing. If you previously signed up at a different price, you will continue to be charged your original price until you change your plan."}),e.jsx(Y,{})]})]})})]})})}export{Le as default};
