import{j as r}from"./jsx-runtime-BMrMXMSG.js";import{R as p}from"./index-NTrdOwuS.js";import{c as f}from"./constants-PTFKni65.js";import{u as m}from"./index-qcftwevc.js";import{B as h}from"./use-toggle-Eq3DVTD9.js";function x({updateSelectedProducts:s,selectedProducts:t,stepId:o,onBoarding:a}){const c=p(),d=m(),u=async()=>{const l=t?.map(e=>({id:e.shopifyProductId}))||[],i=await c.resourcePicker({type:"product",multiple:!0,action:"select",filter:{variants:!1,draft:!1,archived:!1,multiple:2,query:`-tag:${f}`},selectionIds:l});if(!i)return;const n=i.map(e=>({shopifyProductId:e.id,shopifyProductHandle:e.handle}));if(a)s(n);else{if(!o)throw new Error("Step id is required");const e=new FormData;e.append("action","updateSelectedProducts"),e.append("selectedProducts",JSON.stringify({stepId:o,selectedProducts:n})),d(e,{method:"POST",navigate:!0})}};return r.jsx(r.Fragment,{children:r.jsx(h,{onClick:u,fullWidth:!0,variant:t?.length>0?"secondary":"primary",children:t.length===0?"Select products":`${t?.length} products selected`})})}export{x as I};
