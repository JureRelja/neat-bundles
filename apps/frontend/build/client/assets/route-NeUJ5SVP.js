import{r as l,j as t}from"./jsx-runtime-BMrMXMSG.js";import{a as T,G as C}from"./constants-xrzLx32Y.js";import{I as j}from"./wideButton-D6W8M1Od.js";import{I as S}from"./contentStepInputs-DCJJSpa0.js";import{u as w}from"./index-y3bcNOgC.js";import{a as y}from"./index-dL4ND7l9.js";import{B as s,T as p}from"./BlockStack-CBC_PXe6.js";import{T as E}from"./TextField-B-Nm0VLF.js";import"./use-toggle-Bx-o2WPs.js";import"./context-C-JwoyEZ.js";import"./Icon-C-cZWGQM.js";import"./use-is-after-initial-mount-DPsAqfZs.js";import"./InlineStack-BYbsxF_T.js";import"./DeleteIcon.svg-BsxW9olQ.js";import"./InlineGrid-Df5BtU4c.js";import"./Select-Cif7Qcy3.js";import"./Box-CnqJGKrn.js";import"./ChoiceList-Dt5iyaoi.js";import"./Bleed-DpULRbVU.js";import"./use-event-listener-DOg0fKDs.js";import"./EventListener-kZJ1rsuP.js";const _="_tableWrapper_1tdlw_1",q="_loadingTable_1tdlw_5",L="_hide_1tdlw_18",v={tableWrapper:_,loadingTable:q,hide:L};function Y(){const u=w(),m=y(),[c,d]=l.useState([]),h=()=>{if(!a)return;if(e.inputLabel.length===0){d(r=>r?[...r,{fieldId:`inputLabel${e.id}`,field:"Input label",message:"Input label is required"}]:[{fieldId:`inputLabel${e.id}`,field:"Input label",message:"Input label is required"}]);return}else if(e.inputType!="IMAGE"&&(!e.maxChars||e.maxChars<1)){d(r=>r?[...r,{fieldId:`maxChars${e.id}`,field:"Max length",message:"Max length is required and must be greater than 0"}]:[{fieldId:`maxChars${e.id}`,field:"Max length",message:"Max length is required and must be greater than 0"}]);return}const n=new FormData,i={title:a,description:"",stepType:"CONTENT",stepNumber:1,contentInputs:[{inputLabel:e.inputLabel,required:e.required,maxChars:e.maxChars,inputType:e.inputType}]};n.append("stepData",JSON.stringify(i)),n.append("action","addContentStep"),u(n,{method:"POST",action:`/app/edit-bundle-builder/${m.bundleid}/steps?onboarding=true&stepNumber=4`})},[a,x]=l.useState(),[e,o]=l.useState({id:1,inputType:"TEXT",inputLabel:"",required:!0,maxChars:50,bundleStepId:1}),f=n=>{o(n)},b=n=>{d(i=>i.filter(I=>I.fieldId===n))},g=n=>{o(i=>({...i,id:i.id-1}))};return t.jsx("div",{className:v.fadeIn,children:t.jsxs(s,{gap:"1000",inlineAlign:"center",children:[t.jsxs(s,{gap:T,children:[t.jsx(p,{as:"p",variant:"headingLg",alignment:"center",children:"Enter the title for the second step"}),t.jsx(E,{label:"Step title",labelHidden:!0,error:a===""?"Step title is required":"",type:"text",name:"stepTitle",value:a,helpText:"Customers will see this title when they build a bundle.",onChange:n=>{x(n)},autoComplete:"off"})]}),t.jsxs(s,{gap:"600",inlineAlign:"center",children:[t.jsxs(s,{gap:C,children:[t.jsx(p,{as:"p",variant:"headingLg",alignment:"center",children:"Configure the input fields for the second step"}),t.jsx(p,{as:"p",variant:"bodyMd",tone:"subdued",alignment:"center",children:"This is a content step, where customers will need to enter content (text, numbers or image) into the input fields."})]}),t.jsx(S,{removeContentInputField:g,contentInput:e,single:!0,errors:c,inputId:e.id,index:1,updateFieldErrorHandler:b,updateContentInput:f},e.id)]}),t.jsx(j,{onClick:h})]})})}export{Y as default};
