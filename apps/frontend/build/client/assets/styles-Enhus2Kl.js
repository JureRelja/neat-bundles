import{r as s,R as i}from"./jsx-runtime-BMrMXMSG.js";import{i as k,n as f,d as L,e as P,f as b,I as T}from"./context-C-JwoyEZ.js";import{d as M,P as x,E as R,S as _,T as w,a as N,g as O,b as I}from"./context-g-r66Qxo.js";import{u as B,L as D}from"./use-is-after-initial-mount-DPsAqfZs.js";import{M as H}from"./context-B2IVp4WU.js";import{E as W}from"./EventListener-kZJ1rsuP.js";const g="data-lock-scrolling",v="data-lock-scrolling-hidden",E="data-lock-scrolling-wrapper";let d=0;function $(){const{body:r}=document;return r.scrollHeight>r.clientHeight}class F{constructor(){this.scrollLocks=0,this.locked=!1}registerScrollLock(){this.scrollLocks+=1,this.handleScrollLocking()}unregisterScrollLock(){this.scrollLocks-=1,this.handleScrollLocking()}handleScrollLocking(){if(k)return;const{scrollLocks:e}=this,{body:t}=document,n=t.firstElementChild;e===0?(t.removeAttribute(g),t.removeAttribute(v),n&&n.removeAttribute(E),window.scroll(0,d),this.locked=!1):e>0&&!this.locked&&(d=window.pageYOffset,t.setAttribute(g,""),$()||t.setAttribute(v,""),n&&(n.setAttribute(E,""),n.scrollTop=d),this.locked=!0)}resetScrollPosition(){d=0}}const V=/\[(.*?)\]|(\w+)/g;function C(r,e,t){if(r==null)return;const n=Array.isArray(e)?e:K(e);let o=r;for(let a=0;a<n.length;a++){const l=o[n[a]];if(l===void 0)return t;o=l}return o}function K(r){const e=[];let t;for(;t=V.exec(r);){const[,n,o]=t;e.push(n||o)}return e}function G(...r){let e={};for(const t of r)e=A(e,t);return e}function A(r,e){const t=Array.isArray(r)?[...r]:{...r};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n))y(e[n])&&y(t[n])?t[n]=A(t[n],e[n]):t[n]=e[n];else continue;return t}function y(r){return r!==null&&typeof r=="object"}const U=/{([^}]*)}/g;class S{constructor(e){this.translation={},this.translation=Array.isArray(e)?G(...e.slice().reverse()):e}translate(e,t){const n=C(this.translation,e,"");return n?t?n.replace(U,o=>{const a=o.substring(1,o.length-1);if(t[a]===void 0){const l=JSON.stringify(t);throw new Error(`Error in translation for key '${e}'. No replacement found for key '${a}'. The following replacements were passed: '${l}'`)}return t[a]}):n:""}translationKeyExists(e){return!!C(this.translation,e)}}const z=s.createContext(void 0),Q=s.createContext(void 0),Z=function({children:e}){const[t,n]=s.useState(f().matches),o=s.useCallback(M(()=>{t!==f().matches&&n(!t)},40,{trailing:!0,leading:!0,maxWait:40}),[t]);s.useEffect(()=>{n(f().matches)},[]);const a=s.useMemo(()=>({isNavigationCollapsed:t}),[t]);return i.createElement(H.Provider,{value:a},i.createElement(W,{event:"resize",handler:o}),e)};function J(r,e){return i.createElement("div",{id:"PolarisPortalsContainer",ref:e})}const X=s.forwardRef(J);function Y({children:r,container:e}){const t=B(),n=s.useRef(null),o=s.useMemo(()=>e?{container:e}:t?{container:n.current}:{container:null},[e,t]);return i.createElement(x.Provider,{value:o},r,e?null:i.createElement(X,{ref:n}))}const q=s.createContext(void 0);function j({children:r}){const[e,t]=s.useState([]),n=s.useCallback(l=>{t(c=>[...c,l])},[]),o=s.useCallback(l=>{let c=!0;return t(h=>{const u=[...h],p=u.indexOf(l);return p===-1?c=!1:u.splice(p,1),u}),c},[]),a=s.useMemo(()=>({trapFocusList:e,add:n,remove:o}),[n,e,o]);return i.createElement(q.Provider,{value:a},r)}const ee={tooltip:0,hovercard:0};function te({children:r}){const[e,t]=s.useState(ee),n=s.useCallback(l=>{t(c=>({...c,[l]:c[l]+1}))},[]),o=s.useCallback(l=>{t(c=>({...c,[l]:c[l]-1}))},[]),a=s.useMemo(()=>({presenceList:Object.entries(e).reduce((l,c)=>{const[h,u]=c;return{...l,[h]:u>=1}},{}),presenceCounter:e,addPresence:n,removePresence:o}),[n,o,e]);return i.createElement(R.Provider,{value:a},r)}const ne=20,m=30,re=m+10;function oe(){const r=document.createElement("div");r.setAttribute("style",`position: absolute; opacity: 0; transform: translate3d(-9999px, -9999px, 0); pointer-events: none; width:${m}px; height:${m}px;`);const e=document.createElement("div");e.setAttribute("style",`width:100%; height: ${re}; overflow:scroll; scrollbar-width: thin;`),r.appendChild(e),document.body.appendChild(r);const t=m-(r.firstElementChild?.clientWidth??0),n=Math.min(t,ne);document.documentElement.style.setProperty("--pc-app-provider-scrollbar-width",`${n}px`),document.body.removeChild(r)}class de extends s.Component{constructor(e){super(e),this.setBodyStyles=()=>{document.body.style.backgroundColor="var(--p-color-bg)",document.body.style.color="var(--p-color-text)"},this.setRootAttributes=()=>{const o=this.getThemeName();L.forEach(a=>{document.documentElement.classList.toggle(P(a),a===o)})},this.getThemeName=()=>this.props.theme??b,this.stickyManager=new _,this.scrollLockManager=new F;const{i18n:t,linkComponent:n}=this.props;this.state={link:n,intl:new S(t)}}componentDidMount(){if(document!=null){this.stickyManager.setContainer(document),this.setBodyStyles(),this.setRootAttributes();const e=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.userAgent.includes("Version/16.1")||navigator.userAgent.includes("Version/16.2")||navigator.userAgent.includes("Version/16.3")),t=navigator.userAgent.includes("Shopify Mobile/iOS")&&(navigator.userAgent.includes("OS 16_1")||navigator.userAgent.includes("OS 16_2")||navigator.userAgent.includes("OS 16_3"));(e||t)&&document.documentElement.classList.add("Polaris-Safari-16-Font-Optical-Sizing-Patch")}oe()}componentDidUpdate({i18n:e,linkComponent:t}){const{i18n:n,linkComponent:o}=this.props;this.setRootAttributes(),!(n===e&&o===t)&&this.setState({link:o,intl:new S(n)})}render(){const{children:e,features:t}=this.props,n=this.getThemeName(),{intl:o,link:a}=this.state;return i.createElement(w.Provider,{value:n},i.createElement(N.Provider,{value:O(n)},i.createElement(z.Provider,{value:t},i.createElement(T.Provider,{value:o},i.createElement(Q.Provider,{value:this.scrollLockManager},i.createElement(I.Provider,{value:this.stickyManager},i.createElement(D.Provider,{value:a},i.createElement(Z,null,i.createElement(Y,null,i.createElement(j,null,i.createElement(te,null,e)))))))))))}}const me="/assets/styles-BTPZE52T.css";export{de as A,me as p};
