import{R as c,r as w,j as e}from"./jsx-runtime-BMrMXMSG.js";import{R as K,p as R,_ as M}from"./index-NTrdOwuS.js";import{b as f,G as I,a as V}from"./constants-PTFKni65.js";import{B as O}from"./BundleDiscountTypeClient-B-3njYHa.js";import{u as ue}from"./useNavigateSubmit-CcxL25EO.js";import{b as ee,u as te,a as ne,v as pe,w as he}from"./index-X6hTWa2L.js";import{b as me,L as _,u as xe,a as be,F as je}from"./components-HnT9RUCx.js";import{u as ge}from"./index-qcftwevc.js";import{S as ae}from"./SkeletonPage-De1vAtof.js";import{B as i,T as o}from"./BlockStack-CwgU8ZDe.js";import{C as l}from"./Card-ZEVPeMCa.js";import{S as p}from"./SkeletonBodyText-PJLcqbGt.js";import{B as u}from"./Box-rytM3cuw.js";import{T as E}from"./TextField-BeUUpecL.js";import{D as ie}from"./Divider-BzciHtgk.js";import{B as $}from"./ButtonGroup-CD4h0o06.js";import{B as j,a as ve}from"./use-toggle-Eq3DVTD9.js";import{I as W}from"./InlineStack-BZy780dy.js";import{S as X,D as fe,E as ye}from"./EmptyState-DqBpdlXH.js";import{B as F}from"./Badge-SnCWnBbz.js";import{S as Ce}from"./DeleteIcon.svg-BsxW9olQ.js";import{S as Se}from"./EditIcon.svg-SYyjgaKg.js";import{P as Te}from"./Page-DZ5GBioq.js";import{S as we}from"./ExternalIcon.svg-1Nno8FFk.js";import{B as Be}from"./Banner-ByLDynuR.js";import{L as H}from"./Layout-BYdFqsmV.js";import{I as Pe}from"./InlineGrid-CSxQjylE.js";import{T as z}from"./Pagination-Dn9qu2P0.js";import{C as Ie}from"./ChoiceList-D6-7UDXf.js";import{I as Y}from"./Icon-C8tnHXot.js";import{S as J}from"./QuestionCircleIcon.svg-CfqkKV47.js";import{S as q}from"./Select-DopI2RBP.js";import{F as De}from"./FooterHelp-CYIxbky1.js";import"./context-DYc23ASG.js";import"./within-content-context-B9v2rWOt.js";import"./use-is-after-initial-mount-2owk6l5Z.js";import"./use-event-listener-CxlhjZIg.js";import"./EventListener-kZJ1rsuP.js";import"./context-BqWvd0oi.js";import"./Bleed-CojZzunP.js";import"./context-B2IVp4WU.js";var se=function(s){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),c.createElement("path",{fillRule:"evenodd",d:"M10 3.5a.75.75 0 0 1 .75.75v9.69l2.72-2.72a.75.75 0 0 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l2.72 2.72v-9.69a.75.75 0 0 1 .75-.75Z"}))};se.displayName="ArrowDownIcon";var le=function(s){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),c.createElement("path",{fillRule:"evenodd",d:"M10 16.5a.75.75 0 0 1-.75-.75v-9.69l-2.72 2.72a.75.75 0 1 1-1.06-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06l-2.72-2.72v9.69a.75.75 0 0 1-.75.75Z"}))};le.displayName="ArrowUpIcon";var re=function(s){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),c.createElement("path",{fillRule:"evenodd",d:"M6.515 4.75a2 2 0 0 1 1.985-1.75h3a2 2 0 0 1 1.985 1.75h.265a2.25 2.25 0 0 1 2.25 2.25v7.75a2.25 2.25 0 0 1-2.25 2.25h-7.5a2.25 2.25 0 0 1-2.25-2.25v-7.75a2.25 2.25 0 0 1 2.25-2.25h.265Zm1.985-.25h3a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Zm-1.987 1.73.002.02h-.265a.75.75 0 0 0-.75.75v7.75c0 .414.336.75.75.75h7.5a.75.75 0 0 0 .75-.75v-7.75a.75.75 0 0 0-.75-.75h-.265a2 2 0 0 1-1.985 1.75h-3a2 2 0 0 1-1.987-1.77Z"}))};re.displayName="ClipboardIcon";var oe=function(s){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),c.createElement("path",{fillRule:"evenodd",d:"M5.5 5.75c0-.69.56-1.25 1.25-1.25h2.75v3.25c0 .966.784 1.75 1.75 1.75h3.25v1.25a.75.75 0 0 0 1.5 0v-2a.75.75 0 0 0-.22-.53l-5-5a.75.75 0 0 0-.53-.22h-3.5a2.75 2.75 0 0 0-2.75 2.75v8.5a2.75 2.75 0 0 0 2.75 2.75h4.25a.75.75 0 0 0 0-1.5h-4.25c-.69 0-1.25-.56-1.25-1.25v-8.5Zm7.94 2.25-2.44-2.44v2.19c0 .138.112.25.25.25h2.19Z"}),c.createElement("path",{d:"M14.5 13.25a.75.75 0 0 1 1.5 0v1.25h1.25a.75.75 0 0 1 0 1.5h-1.25v1.25a.75.75 0 0 1-1.5 0v-1.25h-1.25a.75.75 0 0 1 0-1.5h1.25v-1.25Z"}))};oe.displayName="PageAddIcon";var de=function(s){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),c.createElement("path",{d:"M3.5 9.25a.75.75 0 0 0 1.5 0 3 3 0 0 1 3-3h6.566l-1.123 1.248a.75.75 0 1 0 1.114 1.004l2.25-2.5a.75.75 0 0 0-.027-1.032l-2.25-2.25a.75.75 0 1 0-1.06 1.06l.97.97h-6.44a4.5 4.5 0 0 0-4.5 4.5Z"}),c.createElement("path",{d:"M16.5 10.75a.75.75 0 0 0-1.5 0 3 3 0 0 1-3 3h-6.566l1.123-1.248a.75.75 0 1 0-1.114-1.004l-2.25 2.5a.75.75 0 0 0 .027 1.032l2.25 2.25a.75.75 0 0 0 1.06-1.06l-.97-.97h6.44a4.5 4.5 0 0 0 4.5-4.5Z"}))};de.displayName="RefreshIcon";var ce=function(s){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),c.createElement("path",{fillRule:"evenodd",d:"M12.5 10a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm-1.5 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),c.createElement("path",{fillRule:"evenodd",d:"M9.377 2.5c-.926 0-1.676.75-1.676 1.676v.688c0 .056-.043.17-.198.251-.153.08-.303.168-.448.262-.147.097-.268.076-.318.048l-.6-.346a1.676 1.676 0 0 0-2.29.613l-.622 1.08a1.676 1.676 0 0 0 .613 2.289l.648.374c.048.028.124.12.119.29a5.484 5.484 0 0 0 .005.465c.009.175-.07.27-.119.299l-.653.377a1.676 1.676 0 0 0-.613 2.29l.623 1.08a1.676 1.676 0 0 0 2.29.613l.7-.405c.048-.028.166-.048.312.043.115.071.233.139.353.202.155.08.198.195.198.251v.811c0 .926.75 1.676 1.676 1.676h1.246c.926 0 1.676-.75 1.676-1.676v-.81c0-.057.042-.171.197-.252.121-.063.239-.13.354-.202.146-.091.264-.07.312-.043l.7.405a1.676 1.676 0 0 0 2.29-.614l.623-1.08a1.676 1.676 0 0 0-.613-2.289l-.653-.377c-.05-.029-.128-.123-.119-.3a5.494 5.494 0 0 0 .005-.463c-.005-.171.07-.263.12-.291l.647-.374a1.676 1.676 0 0 0 .613-2.29l-.623-1.079a1.676 1.676 0 0 0-2.29-.613l-.6.346c-.049.028-.17.048-.318-.048a5.4 5.4 0 0 0-.448-.262c-.155-.081-.197-.195-.197-.251v-.688c0-.926-.75-1.676-1.676-1.676h-1.246Zm-.176 1.676c0-.097.078-.176.176-.176h1.246c.097 0 .176.079.176.176v.688c0 .728.462 1.298 1.003 1.58.11.058.219.122.323.19.517.337 1.25.458 1.888.09l.6-.346a.176.176 0 0 1 .24.064l.623 1.08a.176.176 0 0 1-.064.24l-.648.374c-.623.36-.888 1.034-.868 1.638a4.184 4.184 0 0 1-.004.337c-.032.615.23 1.31.867 1.677l.653.377a.176.176 0 0 1 .064.24l-.623 1.08a.176.176 0 0 1-.24.065l-.701-.405c-.624-.36-1.341-.251-1.855.069a3.91 3.91 0 0 1-.255.145c-.54.283-1.003.853-1.003 1.581v.811a.176.176 0 0 1-.176.176h-1.246a.176.176 0 0 1-.176-.176v-.81c0-.73-.462-1.3-1.003-1.582a3.873 3.873 0 0 1-.255-.146c-.514-.32-1.23-.428-1.855-.068l-.7.405a.176.176 0 0 1-.241-.065l-.623-1.08a.176.176 0 0 1 .064-.24l.653-.377c.637-.368.899-1.062.867-1.677a3.97 3.97 0 0 1-.004-.337c.02-.604-.245-1.278-.868-1.638l-.648-.374a.176.176 0 0 1-.064-.24l.623-1.08a.176.176 0 0 1 .24-.064l.6.346c.638.368 1.37.247 1.888-.09a3.85 3.85 0 0 1 .323-.19c.54-.282 1.003-.852 1.003-1.58v-.688Z"}))};ce.displayName="SettingsIcon";var G=(n=>(n.FIXED="FIXED",n.CALCULATED="CALCULATED",n))(G||{});const Ee="_tableWrapper_hjc71_1",Ae="_loadingTable_hjc71_13",Ne="_hide_hjc71_26",ke="_dummyIconPlaceholder_hjc71_30",Oe="_stepTitleContainer_hjc71_43",D={tableWrapper:Ee,loadingTable:Ae,hide:Ne,dummyIconPlaceholder:ke,stepTitleContainer:Oe};function Re({user:n,bundleBuilderSteps:s}){const B=ee(),A=te(),g=K(),C=A.state!="idle",x=ne(),v=me(),S=ge(),r=s.sort((t,d)=>t.stepNumber-d.stepNumber),N=()=>s.length>=5?(g.modal.show("no-more-steps-modal"),!1):n.isDevelopmentStore?!0:n.activeBillingPlan==="BASIC"&&s.length>=2?(g.modal.show("step-limit-modal"),!1):!0,[b,h]=w.useState(),[m,k]=w.useState("PRODUCT"),T=async()=>{N()&&g.modal.show("new-step-modal")},U=()=>{if(!b)return;const t=new FormData;if(m==="PRODUCT"){const d={title:b,description:"",stepNumber:s.length+1,stepType:"PRODUCT",productInput:{minProducts:0,maxProducts:0}};t.append("stepData",JSON.stringify(d)),t.append("action","addProductStep")}else{const d={title:b,description:"",stepNumber:s.length+1,stepType:"CONTENT"};t.append("stepData",JSON.stringify(d)),t.append("action","addContentStep")}S(t,{method:"POST",action:`/app/edit-bundle-builder/${x.bundleid}/steps`}),g.modal.hide("new-step-modal")},P=async t=>{if(!N())return;const d=new FormData;d.append("action","duplicateStep"),v.submit(d,{method:"POST",action:`/app/edit-bundle-builder/${x.bundleid}/steps/${t}`})},L=async t=>{const d=new FormData;d.append("action","deleteStep"),v.submit(d,{method:"POST",action:`/app/edit-bundle-builder/${x.bundleid}/steps/${t}`})},y=async(t,d)=>{const Z=new FormData;Z.append("action",d),Z.append("stepId",t.toString()),v.submit(Z,{method:"POST",action:`/app/edit-bundle-builder/${x.bundleid}/steps`})},a=async t=>{await g.saveBar.leaveConfirmation(),B(t)};return w.useEffect(()=>{},[v.state]),e.jsx(e.Fragment,{children:C?e.jsx(ae,{primaryAction:!0,children:e.jsxs(i,{gap:"500",children:[e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(R,{id:"step-limit-modal",children:[e.jsx(u,{padding:"300",children:e.jsxs(i,{gap:f,children:[e.jsx(o,{as:"p",children:"You are on the 'Basic' plan which only allows you to create up to 2 steps for each bundle."}),e.jsxs(o,{as:"p",variant:"headingSm",children:["If you want to create more steps, go to ",e.jsx(_,{to:"/app/billing",children:"billing"})," and upgrade to paid plan."]})]})}),e.jsx(M,{title:"Maximum steps reached",children:e.jsx("button",{variant:"primary",type:"button",onClick:()=>g.modal.hide("step-limit-modal"),children:"Close"})})]}),e.jsxs(R,{id:"no-more-steps-modal",children:[e.jsx(u,{padding:"300",children:e.jsx(o,{as:"p",children:"You can't add more than 5 steps for one bundle."})}),e.jsx(M,{title:"Maximum steps reached",children:e.jsx("button",{variant:"primary",type:"button",onClick:()=>g.modal.hide("no-more-steps-modal"),children:"Close"})})]}),e.jsxs(R,{id:"new-step-modal",children:[e.jsx(u,{padding:"300",children:e.jsxs(i,{gap:f,children:[e.jsxs(i,{gap:f,children:[e.jsx(o,{as:"p",variant:"headingSm",children:"Enter the title of your new step"}),e.jsx(E,{label:"Title",labelHidden:!0,autoComplete:"off",inputMode:"text",name:"bundleTitle",helpText:"Customers will see this title when they build a bundle.",value:b,error:b===""?"Please enter a title":void 0,onChange:t=>{h(t)},type:"text"})]}),e.jsx(ie,{}),e.jsxs(i,{gap:f,align:"center",inlineAlign:"center",children:[e.jsx(o,{as:"p",variant:"headingSm",children:"Select the type of step you want to create."}),e.jsxs($,{variant:"segmented",children:[e.jsx(j,{pressed:m==="PRODUCT",size:"large",onClick:()=>k("PRODUCT"),children:"Product step"}),e.jsx(j,{pressed:m==="CONTENT",size:"large",onClick:()=>k("CONTENT"),children:"Content step"})]}),e.jsx(o,{as:"p",variant:"bodyMd",children:m==="PRODUCT"?"Customers will be able to select products on this step.":"Customers will be able to enter content (text, image, etc) on this step."})]})]})}),e.jsx(M,{title:"New step",children:e.jsx("button",{variant:"primary",type:"button",onClick:U,disabled:C,children:"Create"})})]}),e.jsxs("div",{id:D.tableWrapper,children:[e.jsx("div",{className:v.state!=="idle"?D.loadingTable:D.hide,children:e.jsx(ve,{accessibilityLabel:"Spinner example",size:"large"})}),e.jsx(l,{children:e.jsxs(i,{children:[e.jsxs(W,{align:"space-between",children:[e.jsx(o,{as:"h2",variant:"headingMd",children:"Bundle steps"}),e.jsx(j,{icon:X,size:"slim",variant:"primary",onClick:T,children:"Add step"})]}),r.length>0?e.jsx(fe,{hoverable:!0,columnContentTypes:["text","text","text","text","text"],headings:["Step","Title","Type","Rearange","Actions"],rows:r.map(t=>[t.stepNumber,e.jsx(_,{onClick:a.bind(null,`/app/edit-bundle-builder/${x.bundleid}/steps/${t.stepNumber}/${t.stepType==="PRODUCT"?"product":"content"}`),to:"#",children:e.jsx("div",{className:D.stepTitleContainer,children:e.jsx(o,{as:"p",tone:"base",children:t.title})})}),t.stepType==="PRODUCT"?e.jsx(F,{tone:"warning",children:"Product step"}):e.jsx(F,{tone:"magic",children:"Content step"}),e.jsx($,{children:e.jsxs(W,{align:"space-between",blockAlign:"stretch",children:[t.stepNumber!==r.length?e.jsx(j,{icon:se,size:"slim",variant:"plain",onClick:y.bind(null,t.id,"moveStepDown")}):e.jsx("div",{className:D.dummyIconPlaceholder,children:" "}),t.stepNumber!==1&&e.jsx(j,{icon:le,size:"slim",variant:"plain",onClick:y.bind(null,t.id,"moveStepUp")})]})}),e.jsxs($,{children:[e.jsx(j,{icon:Ce,variant:"secondary",tone:"critical",onClick:L.bind(null,t.stepNumber)}),e.jsx(j,{icon:oe,variant:"secondary",onClick:()=>{P(t.stepNumber)},children:"Duplicate"}),e.jsx(j,{icon:Se,variant:"primary",onClick:a.bind(null,`/app/edit-bundle-builder/${x.bundleid}/steps/${t.stepNumber}/${t.stepType==="PRODUCT"?"product":"content"}`),children:"Edit"})]})])}):e.jsx(ye,{heading:"Letâ€™s create the first step for your customers to take!",action:{content:"Create step",icon:X,onAction:T},fullWidth:!0,image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",children:e.jsx("p",{children:"Your customers will be able to select products or add content (like text or images) at each step to their bundle."})})]})})]})]})})}const Me="_tooltipContent_i3ne1_1",Q={tooltipContent:Me};function Tt(){const n=te(),s=ee(),B=K(),A=n.state==="loading",g=n.state==="submitting",C=ne(),x=ue(),v=xe(),S=be().data,r=v?.errors;console.log(r);const N=v?.data,b=S.bundleBuilder,[h,m]=w.useState(r?.length===0||!r?b:N),[k,T]=w.useState(!1),U=async()=>{await B.saveBar.leaveConfirmation(),T(!0),x("deleteBundle",`/app/edit-bundle-builder/${C.bundleid}/builder?redirect=true`)};w.useEffect(()=>{if(r&&r.length===0){window.scrollTo(0,0);return}r?.forEach(a=>{a.fieldId&&document.getElementById(a.fieldId)?.scrollIntoView()})},[A,r]);const P=a=>{r?.forEach(t=>{t.fieldId===a&&(t.message="")})},L=async()=>{await B.saveBar.leaveConfirmation(),x("recreateBundleBuilder",`/app/edit-bundle-builder/${C.bundleid}/builder`)},y=`${S.userPrimaryDomain}/apps/nb/widgets/${b.id}`;return e.jsx(e.Fragment,{children:A||g?e.jsx(ae,{primaryAction:!0,children:e.jsxs(i,{gap:"500",children:[e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})}),e.jsx(l,{children:e.jsx(p,{})})]})}):e.jsxs("div",{children:[e.jsxs(R,{id:"delete-confirm-modal",open:k,children:[e.jsx(u,{padding:"300",children:e.jsx(o,{as:"p",children:"If you delete this bundle, everything will be lost forever."})}),e.jsxs(M,{title:"Are you sure you want to delete this bundle?",children:[e.jsx("button",{onClick:()=>T(!1),children:"Close"}),e.jsx("button",{variant:"primary",tone:"critical",onClick:()=>{x("deleteBundle",`/app/edit-bundle-builder/${C.bundleid}/builder?redirect=true`),T(!1)},children:"Delete"})]})]}),e.jsx(Te,{secondaryActions:[{content:"Settings",url:`${y}`,icon:ce},{content:"See bundle page",accessibilityLabel:"Preview action label",icon:we,url:`${y}`,target:"_blank"},{icon:de,onAction:L,content:"Recreate bundle",helpText:"If you accidentally deleted the dummy product associated with this bundle, click this button to recreate it."}],titleMetadata:b.published?e.jsx(F,{tone:"success",children:"Active"}):e.jsx(F,{tone:"info",children:"Draft"}),backAction:{content:"Products",onAction:async()=>{await B.saveBar.leaveConfirmation(),s("/app")}},title:`${b.title}`,subtitle:"Edit bundle details and steps",compactTitle:!0,children:e.jsxs(i,{gap:I,children:[r&&r.length===0?e.jsx(Be,{title:"Bundle updated!",tone:"success",onDismiss:()=>{},children:e.jsx(i,{gap:V,children:e.jsx(o,{as:"p",variant:"headingMd",children:"You succesfuly updated this bundle."})})}):null,e.jsx(je,{method:"POST","data-discard-confirmation":!0,"data-save-bar":!0,children:e.jsxs(i,{gap:f,children:[e.jsxs(H,{children:[e.jsx(H.Section,{children:e.jsxs(i,{gap:f,children:[e.jsx(Re,{user:S.user,bundleBuilderSteps:S.allBundleSteps}),e.jsx(l,{children:e.jsxs(i,{gap:I,children:[e.jsx(o,{as:"p",variant:"headingMd",children:"Bundle page"}),e.jsxs(Pe,{columns:{xs:"1fr",md:"88% 10%"},gap:"100",children:[e.jsx(u,{width:"full",children:e.jsx(E,{label:"Bundle page",labelHidden:!0,autoComplete:"off",readOnly:!0,name:"bundlePage",value:y,type:"url"})}),e.jsx(z,{width:"wide",activatorWrapper:"div",content:"Share this link with your customers to let them access the bundle page.",children:e.jsx(u,{width:"full",children:e.jsx(j,{size:"large",icon:re,onClick:()=>navigator.clipboard.writeText(y),children:"Copy"})})})]})]})}),e.jsx(l,{children:e.jsxs(i,{children:[e.jsx(o,{as:"p",variant:"headingMd",children:"Bundle Pricing"}),e.jsx(Ie,{title:"Bundle Pricing",name:"bundlePricing",titleHidden:!0,choices:[{label:"Calculated price ",value:G.CALCULATED,helpText:e.jsx(z,{width:"wide",activatorWrapper:"div",content:`e.g. use case: you want to sell a shirt,
                                      pants, and a hat in a bundle with a 10%
                                      discount on the whole order, and you want the
                                      total price before discount to be the sum of
                                      the prices of individual products that the customer has selected.`,children:e.jsxs("div",{className:Q.tooltipContent,children:[e.jsx(u,{children:e.jsx("p",{children:"The final price will be the sum of the prices of all products that the customer has selected."})}),e.jsx(u,{children:e.jsx(Y,{source:J})})]})})},{label:"Fixed price",value:G.FIXED,helpText:e.jsx(z,{width:"wide",activatorWrapper:"div",content:`e.g. use case: you want to sell 5 cookies
                                    in a bundle, always at the same price, but want
                                    your customers to be able to select which
                                    cookies they want.`,children:e.jsxs("div",{className:Q.tooltipContent,children:[e.jsx(u,{children:e.jsx(o,{as:"p",children:"All bundles created will be priced the same."})}),e.jsx(u,{children:e.jsx(Y,{source:J})})]})}),renderChildren:a=>a?e.jsx(u,{maxWidth:"50",id:"priceAmount",children:e.jsx(E,{label:"Price",type:"number",name:"priceAmount",inputMode:"numeric",autoComplete:"off",min:0,error:r?.find(t=>t.fieldId==="priceAmount")?.message,value:h.priceAmount?.toString(),prefix:"$",onChange:t=>{m(d=>({...d,priceAmount:parseFloat(t)})),P("priceAmount")}})}):null}],selected:[h.pricing],onChange:a=>{m(t=>({...t,pricing:a[0]}))}})]})}),e.jsx(l,{children:e.jsxs(i,{gap:I,children:[e.jsx(o,{as:"p",variant:"headingMd",children:"Bundle Discount"}),e.jsxs(i,{gap:V,children:[e.jsx(q,{label:"Discount Type",name:"bundleDiscountType",options:[{label:"Percentage (e.g. 25% off)",value:O.PERCENTAGE},{label:"Fixed (e.g. 10$ off)",value:O.FIXED},{label:"No discount",value:O.NO_DISCOUNT}],value:h.discountType,onChange:a=>{m(t=>({...t,discountType:a}))}}),e.jsx(E,{label:"Discount amount",type:"number",autoComplete:"off",inputMode:"numeric",disabled:h.discountType==="NO_DISCOUNT",name:"discountValue",prefix:h.discountType===O.PERCENTAGE?"%":"$",min:0,max:100,value:h.discountValue?.toString()??"",error:r?.find(a=>a.fieldId==="discountValue")?.message,onChange:a=>{m(t=>({...t,discountValue:parseInt(a)})),P("discountValue")}})]})]})})]})}),e.jsx(H.Section,{variant:"oneThird",children:e.jsxs(i,{gap:f,children:[e.jsx("input",{type:"hidden",name:"action",defaultValue:"updateBundle"}),e.jsx("input",{type:"hidden",name:"bundle",defaultValue:JSON.stringify(h)}),e.jsxs(i,{gap:f,children:[e.jsx(l,{children:e.jsxs(i,{gap:I,children:[e.jsx(o,{as:"p",variant:"headingMd",children:"Bundle title"}),e.jsx(i,{gap:V,children:e.jsx(E,{label:"Title",labelHidden:!0,autoComplete:"off",inputMode:"text",name:"bundleTitle",helpText:"This title will be displayed to your customers on the bundle page, in checkout, and in the cart.",error:r?.find(a=>a.fieldId==="bundleTitle")?.message,value:h.title,onChange:a=>{m(t=>({...t,title:a})),P("bundleTitle")},type:"text"})})]})}),e.jsx(l,{children:e.jsxs(i,{gap:I,children:[e.jsx(o,{as:"p",variant:"headingMd",children:"Bundle status"}),e.jsx(q,{label:"Visibility",name:"bundleVisibility",labelHidden:!0,options:[{label:"Active",value:"true"},{label:"Draft",value:"false"}],helpText:"Bundles set to 'ACTIVE' are visible to anyone browsing your store.",value:h.published?"true":"false",onChange:a=>{m(t=>({...t,published:a==="true"}))}})]})})]})]})})]}),e.jsx(ie,{borderColor:"transparent"}),e.jsx(u,{width:"full",children:e.jsx(i,{inlineAlign:"end",children:e.jsxs($,{children:[e.jsx(j,{variant:"primary",tone:"critical",onClick:U,children:"Delete"}),e.jsx("button",{className:"Polaris-Button Polaris-Button--pressable Polaris-Button--variantSecondary Polaris-Button--sizeMedium Polaris-Button--textAlignCenter",name:"submitBtn",value:"saveBtn",type:"submit",children:e.jsx("span",{className:"Polaris-Text--root Polaris-Text--bodySm Polaris-Text--medium",children:"Save"})}),e.jsx("button",{className:"Polaris-Button Polaris-Button--pressable Polaris-Button--variantPrimary Polaris-Button--sizeMedium Polaris-Button--textAlignCenter",name:"submitBtn",value:"saveAndExitBtn",type:"submit",children:e.jsx("span",{className:"Polaris-Text--root Polaris-Text--bodySm Polaris-Text--medium",children:"Save and return"})})]})})}),e.jsxs(De,{children:["Are you stuck? ",e.jsx(_,{to:"/app/help",children:"Get help"})," from us, or ",e.jsx(_,{to:"/app/feature-request",children:"suggest new features"}),"."]})]})})]})})]})})}function wt(){const n=pe();return he(n)?e.jsxs("div",{children:[e.jsxs("h1",{children:[n.status," ",n.statusText]}),e.jsx("p",{children:n.data})]}):n instanceof Error?e.jsxs("div",{children:[e.jsx("h1",{children:"Error"}),e.jsx("p",{children:n.message}),e.jsx("p",{children:"The stack trace is:"}),e.jsx("pre",{children:n.stack})]}):e.jsx("h1",{children:"Unknown Error"})}export{wt as ErrorBoundary,Tt as default};
