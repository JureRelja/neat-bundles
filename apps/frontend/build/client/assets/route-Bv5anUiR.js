import{r as a,j as t}from"./jsx-runtime-BMrMXMSG.js";import{I as v}from"./resourcePicer-COby-1H6.js";import{a as p,G as C,H as y}from"./constants-PTFKni65.js";import{I as M}from"./wideButton-DColMLDC.js";import{u as w}from"./index-qcftwevc.js";import{a as D}from"./index-X6hTWa2L.js";import{a as B}from"./components-HnT9RUCx.js";import{B as n,T as i}from"./BlockStack-CwgU8ZDe.js";import{T as l,I as N}from"./TextField-BeUUpecL.js";import{I as A}from"./InlineGrid-CSxQjylE.js";import{B as m}from"./Box-rytM3cuw.js";import"./index-NTrdOwuS.js";import"./use-toggle-Eq3DVTD9.js";import"./context-DYc23ASG.js";import"./Icon-C8tnHXot.js";import"./use-is-after-initial-mount-2owk6l5Z.js";import"./use-event-listener-CxlhjZIg.js";import"./EventListener-kZJ1rsuP.js";const E={};function Z(){const h=w(),x=D(),c=B(),g=()=>{if(r.length===0||r.length<e){d(!0);return}if(e<1||o<e){d(!0);return}if(!u){d(!0);return}const s=new FormData,I={title:u,description:"",stepNumber:1,stepType:"PRODUCT",productInput:{allowProductDuplicates:!1,showProductPrice:!0,minProductsOnStep:e,maxProductsOnStep:o,products:r}};s.append("stepData",JSON.stringify(I)),s.append("action","addProductStep"),h(s,{method:"POST",action:`/app/edit-bundle-builder/${x.bundleid}/steps?stepNumber=2&onboarding=true&multiStep=${c.data.multiStep}`,navigate:!0})},[f,d]=a.useState(!1),[u,S]=a.useState(),[r,b]=a.useState([]),[e,P]=a.useState(1),[o,j]=a.useState(3),T=s=>{d(!0),b(s)};return t.jsx("div",{className:E.fadeIn,children:t.jsxs(n,{gap:"1000",inlineAlign:"center",children:[t.jsxs(n,{gap:p,children:[c.data.multiStep?t.jsx(i,{as:"p",variant:"headingLg",alignment:"center",children:"Enter the title for the first step"}):t.jsx(i,{as:"p",variant:"headingLg",alignment:"center",children:"Enter the title for this step"}),t.jsx(l,{label:"Step title",labelHidden:!0,error:u===""?"Step title is required":"",type:"text",name:"stepTitle",value:u,helpText:"Customers will see this title when they build a bundle.",onChange:s=>{S(s)},autoComplete:"off"})]}),t.jsxs(n,{gap:"600",inlineAlign:"center",children:[t.jsxs(n,{gap:C,children:[t.jsx(i,{as:"p",variant:"headingLg",alignment:"center",children:"Select the products you want to display on this step"}),t.jsx(i,{as:"p",variant:"bodyMd",tone:"subdued",alignment:"center",children:"This is a product step, where customers can choose products to add to their bundle."})]}),t.jsxs(n,{gap:p,children:[t.jsx(v,{onBoarding:!0,stepId:void 0,selectedProducts:r,updateSelectedProducts:T}),t.jsx(N,{message:(r.length===0||r.length<e)&&f?`Please select at least ${e} products.`:"",fieldID:"products"}),t.jsxs(n,{gap:p,children:[t.jsx(i,{as:"h2",variant:"headingMd",children:"Product rules"}),t.jsxs(A,{columns:2,gap:y,children:[t.jsx(m,{id:"minProducts",children:t.jsx(l,{label:"Minimum products to select",type:"number",helpText:"Customers must select at least this number of products on this step.",autoComplete:"off",inputMode:"numeric",name:"minProducts",min:1,max:o,value:e.toString(),onChange:s=>{P(Number(s))},error:e<1?"Min products must be greater than 0":""})}),t.jsx(m,{id:"maxProducts",children:t.jsx(l,{label:"Maximum products to select",helpText:"Customers can select up to this number of products on this step.",type:"number",autoComplete:"off",inputMode:"numeric",name:"maxProducts",min:e>0?e:1,value:o.toString(),onChange:s=>{j(Number(s))},error:o<e?"Max products must be greater than or equal to min products":""})})]})]})]})]}),t.jsx(M,{onClick:g})]})})}export{Z as default};
