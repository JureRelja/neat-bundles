{% assign pageBundleNamespace = page.metafields.neat_bundles_app %}


{% comment %} Checking if page is a bundle page to begin with {% endcomment %}
{% if pageBundleNamespace %}
  {% if pageBundleNamespace.bundle_id_page %}
    {% comment %} Rendering a widget  {% endcomment %}

    {% comment %} Render a placeholder widget if the user is in theme editor {% endcomment %}
    {% if request.design_mode == true %}
      {% render 'widget'
        , bundleId: pageBundleNamespace.bundle_id_page.value
        , settings: block.settings %}

    {% else %}
      {% render 'widget'
        , bundleId: pageBundleNamespace.bundle_id_page.value
        , settings: block.settings %}

    {% endif %}
  {% endif %}
{% endif %}


{% schema %}
  {
    "name": "Bundle widget",
    "target": "section",
    "settings": [

      {
        "type": "header",
        "content": "GLOBAL BUNDLE SETTINGS"
      },
      {
        "type": "range",
        "id": "bundle_border_radius",
        "label": "Rounding (border radius)",
        "info": "Changes the rounding of corners on all elements in the bundle, except for input fields.",
        "default": 5,
        "min": 0,
        "max": 20,
        "step": 1,
        "unit": "%"
      },


      {
        "type": "header",
        "content": "STEP NUMBER & TITLE"
      },
      {
        "type": "color",
        "id": "step_icon_color",
        "label": "Step number",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "step_title_color",
        "label": "Step title text",
        "default": "#000000"
      },


      {
        "type": "header",
        "content": "STEP DESCRIPTION"
      },
      {
        "type": "color",
        "id": "step_description_color",
        "label": "Step description text",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "step_description_bg_color",
        "label": "Step description background",
        "default": "#000000"
      },


      {
        "type": "header",
        "content": "PRODUCT SETTINGS"
      },
      {
        "type": "range",
        "id": "product_columns",
        "label": "Number of product colums",
        "info": "On smaller screens products will be shown in fewer columns.",
        "default": 4,
        "min": 0,
        "max": 5,
        "step": 1
      },
      {
        "type": "text_alignment",
        "id": "product_align",
        "label": "Align products",
        "default": "left"
      },
      {
        "type": "color",
        "id": "add_to_bundle_text_color",
        "label": "'Add to bundle' text",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "add_to_bundle_bg_color",
        "label": "'Add to bundle' background",
        "default": "#000000",
        "info": "--------------------------"
      },
      {
        "type": "color",
        "id": "view_product_text_border_color",
        "label": "'View product' text & border",
        "default": "#000000",
        "info": "--------------------------"

      },
      {
        "type": "color",
        "id": "remove_product_text_color",
        "label": "'Remove product' text",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "remove_product_bg_color",
        "label": "'Remove product' background",
        "default": "#000000"
      },


      {
        "type": "header",
        "content": "INPUT FIELDS SETTINGS"
      },
      {
        "type": "range",
        "id": "input_field_border_radius",
        "label": "Input field rounding (border radius)",
        "info": "The higher the value, the rounder the corners will be on input fields.",
        "min": 0,
        "max": 30,
        "step": 1,
        "unit": "%",
        "default": 5
      },


      {
        "type": "header",
        "content": "NAVIGATION SETTINGS"
      },
      {
        "type": "color",
        "id": "prev_step_text_color",
        "label": "'Previous step' text",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "prev_step_bg_color",
        "label": "'Previous step' background",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "next_step_text_color",
        "label": "'Next step' text",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "next_step_bg_color",
        "label": "'Next step' background",
        "default": "#000000"
      }


    ]
  }
{% endschema %}


{% comment %} {
    "type": "number",
    "id": "bundleId",
    "label": "Enter Bundle ID",
    "placeholder": "e.g. 204",
    "info": "You can find the Bundle ID in the Neat Bundles app, next to the name of each bundle."
}  {% endcomment %}